<!DOCTYPE html>
<html>
<head>
	<title>My Search</title>
  <meta name="viewport" content="width=device-width,initial-scale=1">
</head>
<body>

<style type="text/css">
	body, html, main {
	  width: 100%; 
	  height: 100%; 
	  padding: 0; 
	  margin: 0
	}
	html {
		height: 100%;
	}
	iframe {
		width: 100%;
		border: none;
		border-top: solid thin;
		border-top-style: groove;
	}
	.margin-left-1 {
		margin-left: 1em;
	}
	.flexbox {
		display: flex;
	}
	.column {
		flex-flow: column;
	}
	.flex-item-grow {
		flex: 1;
	}
	.content-stretch {
		align-items: stretch;
	}
	.bold {
		font-weight: bold;
	}
</style>

<script type="text/javascript">
	function capitalizeFirstLetter (string) {
	  return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
	}
	function engineUrl (engine) {
		return "http://www." + engine + ".com/search";
	}
	function setSearch(engine) {
		console.log('Change search engine to ', engine);
		searchEngine = engine;
    searchForm.action = searchUrl = engineUrl(engine);
    engineDisplay.textContent = capitalizeFirstLetter(engine);  
    setNotice(noIframe, engine);        
		return search();
	}
	function setNotice (element, engine) {
		element.textContent = (engine == 'bing')
			? 'Search results will appear here...'
			: 'Search results will appear in another tab as Google refuses to run in a frame...'
	}
	function search () {
		if (searchEngine == 'google') {
			searchForm.target = '_blank';
			searchIframe.style.display = 'none';
		} else {
			searchForm.target = 'iframe';
			// searchIframe.src = searchUrl;
			searchIframe.style.display = 'block';
			// searchIframe.style.height = document.body.clientHeight - searchIframe.offsetTop + 'px';
		}
		return searchForm.submit();					
	}
</script>

<main class="flexbox column content-stretch">

	<form 
		class="flexbox" 
		onsubmit="search()" 
	>
		<label for="q">
			Web Search:
		</label>
		<input 
			class="flex-item-grow"
			type="search" 
			name="q" 
			placeholder="Type some text here" 
			autofocus="" 
		>	
	</form>

	<section class="flexbox">
		<button 
			onclick="setSearch('google')"
		>
			Google!
		</button>
		<button 
			onclick="setSearch('bing')"
		>
			Bing!
		</button>		
		<span>
			Default: 
			<span id="engine" class="bold">
				Google
			</span>
		</span>
	</section>
	

	<iframe
		class="flex-item-grow"
		name="iframe"
		style="display: none"
	>
	  There would be Bing Search here but your browser does not support inline frames.
	</iframe>

	<div id="no-iframe"></div>

</main>


<script type="text/javascript">
	// var searchEngine = 'google';
	var searchEngine = 'bing';

 	var engineDisplay = document.getElementById('engine');
	engineDisplay.textContent = capitalizeFirstLetter(searchEngine);

	var searchIframe = document.getElementsByTagName('iframe')[0];
	var searchForm = document.forms[0];
	searchForm.target = '_blank';
	searchForm.action = searchUrl = engineUrl(searchEngine);

	var noIframe = document.getElementById('no-iframe');
  setNotice(noIframe, searchEngine);        
</script>

</body>
</html>
